
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  Raspberri pi 打造监控显示器 - 徐梦阳的博客
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="怯懦的人只会埋葬自己">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="sjpsega's Blog" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//链接新开窗口
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">徐梦阳的博客</a></h1>
  
    <h2>怯懦的人只会埋葬自己</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:42wolf.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="index.html">Home</a></li>
  <li><a href="archives.html">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content"> <div>
	<article class="hentry" role="article">
	<header>
			  	<h1 class="entry-title">Raspberri pi 打造监控显示器</h1>
				<p class="meta"><time datetime="2013-09-06T00:17:30+08:00" pubdate data-updated="true">2013/9/6</time></p>
			 </header>
		  	<div class="entry-content">
			  	<p>硬件的配置</p>

<p>将SD卡装入树莓派，给树莓派插上网线和电源，直接连接HDMI接口即可（VGA需要转接头），第一次配置需要在USB上插入键盘和鼠标进行配置。</p>

<p>树莓派的初始配置</p>

<p>expand – 将根分区扩展到整张SD卡，因为整个Image才400多兆，但是现在的SD卡基本都是几个G的，除非SD卡有其他用途，一般建议选择这项，这样可以有足够多的空间来安装各种程序。</p>

<p>overscan – 可以扩充或者缩小屏幕的设置，除非一启动就发现显示的内容能刚好填满整个电视的画面。大部分情况下是不能填满或者超过，如果这样就要enable这个，然后在系统启动之后，更改config.txt中的overscanleft、overscanright、overscantop和overscanbottom的内容，如果显示内容超出屏幕的范围（显示不全），就要设置这些值为正值，如果是1080p，一般设置为48。如果显示的内容不能填满屏幕，则设置这些值为负值，如果是1080p，一般设置为-48。具体可以更加显示的结果，以16为步长进行调整。</p>

<p>configure_keyboard – 这个很重要，前面的屏幕选默认值：Generic 105-key (Intl) PC，但在Keyboard layout:时，显示出来的都是English（UK）的，要选择Other，然后在里面选择English（US），否则会出现键盘的一些符号不对或者对调，比如引号”和@符号对调，#号变成英镑符号等等。之后的两个屏幕都选择默认值就可以了，到了：Use Control+Alt+Backspace to terminate the X server? 时，选择Yes，表示用这个可以终止X Server，当整个X-Window死掉的时候可以用。</p>

<p>change_pass – 默认的用户名是pi，密码是raspberry，一般登录时不需要输入，但是用ssh远程连接时要用到这个用户名和密码，这里可以更改密码。</p>

<p>changelocale – 更改语言设置。在Locales to be generated: 中，选择enUS.UTF-8和zh_CN.UTF-8。在Default locale for the <br/>
system environment:中，选择enUS.UTF-8（等启动完机器，装完中文字体，再改回zhCN.UTF-8，否则第一次启动会出现方块）。</p>

<p>change<u>timezone – 更改时区，这个很重要，因为树莓派没有内部时钟，是通过网络获取的时间，如果设错时区，那么时间就不正确了，选择Asia – <br/>
Shanghai，没错是Shanghai，木有Beijing，这是Unix的传统。缩写是CST，不知道是China Shanghai Time还是China Standard Time。<br/>
ssh 是否激活sshd服务，应该选择激活，这是当界面死掉后唯一进入机器的通道（如果Kernel没死的话），可以找另外一部机器，用putty或者其他ssh的工具连接到这部机器上，用pi这个用户登录，至少可以实现安全重启。<br/>
boot</u>behaviour – 设置启动时启动图形界面，正常肯定是Yes。<br/>
重启后，将进入LXDE的X-Window。</p>

<p>显示器调整</p>

<p>只有VGA显示器的显示<br/>
这个则需要有HDMI转接口，HDMI线和有电源的HDMI转VGA转接口</p>

<p>分辨率信息的调整需要参考一下这个地址：分辨率调整</p>

<p>如若需要强制显示分辨率，修改/boot/config.txt 即可，修改完毕重启一下就ok了，当然，你得先记住你的ip,不然分辨率配置错误，进不了桌面可就惨了。</p>

<p>以下是我的配置：</p>

<p>hdmi_group=1</p>

<p>hdmi_mode=16</p>

<p>hdmi_group=2</p>

<p>hdmi_mode=82</p>

<p>hdmi<u>ignore</u>edid=0xa5000080<br/>
HDMI显示器<br/>
连接HDMI不需要修改配置，树莓派会自动读取显示器上的配置自适应屏幕。</p>

<p>需要注意的<br/>
因为HDMI的显示是读取显示器而自动适应自己的分辨率的，如果显示器在树莓派打开的时候是关闭的，而又没有配置相关的文件，树莓派会自动显示800X480的分辨率*</p>

<p>关闭树莓派显示器的自动关闭</p>

<p>可以参考一下：这里</p>

<p>再次打开终端，修改一下X—windows的配置文件：</p>

<p>vim /etc/lightdm/lightdm.conf<br/>
然后修改文件添加如下信息：</p>

<p>[SeatDefaults]<br/>
xserver-command=X -s 0 -dpms<br/>
这是把树莓派自动关闭显示器的时间改为0</p>

<p>注：树莓派本身是没有自动休眠的，想想它的耗能就知道了嘛，所谓的休眠，只是定时关闭显示器而已</p>

<p>安装远程桌面VNC并配置开机启动</p>

<p>安装VNC可以参考：这里</p>

<p>sudo apt-get install x11vnc<br/>
然后next安装，一般貌似就已经是自动开机启动了，如果没有开机启动，可以自己配置一下。</p>

<p>开机启动参考：这里</p>

<p>然后在桌面上添加X11VNC的图标：</p>

<p>进入Desktop文件夹：</p>

<p>cd ~Desktop<br/>
编辑一个名为 X11vnc.desktop的文件</p>

<p>vim x11vnc.desktop<br/>
然后把以下内容粘贴进去：</p>

<p>[Desktop Entry]<br/>
Encoding=UTF-8<br/>
Type=Application<br/>
Name=X11VNC<br/>
Comment=<br/>
Exec=x11vnc -forever -usepw -display :0 -ultrafilexfer<br/>
StartupNotify=false<br/>
Terminal=false<br/>
Hidden=false<br/>
然后保存，再编辑在/etc/xdg/lxsession/LXDE/autostart往里面添加一行</p>

<p>X11vnc.desktop<br/>
ok,我们再重启就好了。</p>

<p>开机启动浏览器</p>

<p>安装Unclutter</p>

<p>$ sudo apt-get install unclutter<br/>
添加一行到/etc/xdg/lxsession/LXDE/autostart</p>

<p>@midori -e Fullscreen <br/>
好了，这个时候我们再重启就OK了，然后就会自动打开浏览器啦！</p>

<p>自动刷新浏览器</p>

<p>安装工具sudo apt-get install xdotool<br/>
编写定时刷新脚本 refresh<u>browser.shDISPLAY=:0 xdotool search &ndash;name Cus windowactivate &ndash;sync key F5DISPLAY=:0 xdotool search &ndash;name Err windowactivate &ndash;sync key F5<br/>
crontab配置每分钟刷新一次脚本crontab -e<br/>
添加一行：*/3 * * * /bin/bash /home/pi/script/refresh</u>browser.sh<br/>
检查crontab -l<br/>
这个时候，我们的浏览器就会每3分钟刷新一次啦。</p>

<p>设置默认编辑器</p>

<p>三个方法</p>

<p>第一个，这个重启以后不再生效了。</p>

<p>export VISUAL=vim<br/>
export EDITOR=vim<br/>
第二个，重启以后不生效</p>

<p>select-editor<br/>
第三个,编辑 ~/.bashrc,添加一行，重启依旧有效。</p>

<p>EDITOR=vim<br/>
设置无线网络</p>

<p>编辑配置文件：</p>

<p>sudo nano /etc/network/interfaces<br/>
修改为：</p>

<p>auto lo</p>

<p>iface lo inet loopback<br/>
iface eth0 inet dhcp</p>

<p>allow-hotplug wlan0<br/>
auto wlan0<br/>
iface wlan0 inet dhcp<br/>
wpa-roam /etc/wpa<u>supplicant/wpa</u>supplicant.conf <br/>
然后我们再根据我们自己的无线情况编辑：/etc/wpasupplicant/wpasupplicant.conf</p>

<p>network={<br/>
ssid=“SSID-GOES-HERE”<br/>
proto=RSN<br/>
key_mgmt=WPA-PSK<br/>
pairwise=CCMP TKIP<br/>
group=CCMP TKIP<br/>
psk=“WIFI-PASSWORD-GOES-HERE”<br/>
}<br/>
自动休眠的处理：</p>

<p>首先我们查看一下电源管理：</p>

<p>cat /sys/module/8192cu/parameters/rtw<u>power</u>mgnt<br/>
结果是0，代表关闭。结果是1，代表最小。结果是2，代表最大。 当我们要关闭电源管理，需要</p>

<p>sudo vim /etc/modprobe.d/8192cu.conf</p>

<h1 id="toc_0">Disable power management</h1>

<p>options 8192cu rtw<u>power</u>mgnt=0<br/>
重启，配置Ok.</p>

<h3 id="toc_1">功能的添加</h3>

<h3 id="toc_2">批量制作</h3>

<h3 id="toc_3">Bug Fix</h3>

			</div>
		<footer>
		 <p class="meta">

			<strong>Categories:</strong>&nbsp; 
			<span class="categories">
			
			    <a class='category' href='%E6%97%A7%E6%96%87%E7%AB%A0.html'>旧文章</a>&nbsp;
			
			</span>
		    </p>
		    <p class="meta">

		 </p>

		<div class="sharing">
			<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_tools_1"></a>
	<a class="jiathis_button_tools_2"></a>
	<a class="jiathis_button_tools_3"></a>
	<a class="jiathis_button_tools_4"></a>
	<a href="http://www.jiathis.com/share?uid=1580518" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1580518" charset="utf-8"></script>
<!-- JiaThis Button END -->
<!-- 多说评论框 start -->
	<div class="ds-thread"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"42wolf"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
		</div>

	    <p class="meta">
	    
	        <a class="basic-alignment left" href="%E8%AF%BB%E4%B9%A6%E6%9D%82%E8%B0%88.html"
	        title="Previous Post: 读书杂谈">&laquo; 读书杂谈</a>
	    
	    
	        <a class="basic-alignment right" href="%E8%AE%A9%E7%95%85%E9%94%80%E4%B9%A6%E5%8E%BB%E6%AD%BB.html"
	        title="Next Post: 让畅销书去死">让畅销书去死 &raquo;</a>
	    
	    </p>
	  </footer>
	</article>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="issuecategery.html"><strong>新东西&nbsp;(4)</strong></a>
	         <p class="cat-children-p"> 
	        
	        	<a href="issuecategery.html">软件推荐&nbsp;(3)</a>&nbsp;&nbsp;
	        
	        	<a href="read.html">阅读&nbsp;(1)</a>&nbsp;&nbsp;
	        
	         </p> 
	      </li>
	  
	      <li class="post">
	        <a href="issuecategery.html"><strong>思考&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="emotion.html"><strong>情绪&nbsp;(2)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%97%A7%E6%96%87%E7%AB%A0.html"><strong>旧文章&nbsp;(31)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="pm.html"><strong>产品方法论&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="14292014464963.html">知乎体的厕所读物——从0到1书评</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="14291121970881.html">我不想在二十多岁死去</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="14288560592250.html">标题党：苹果手机的新Bug</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="%E8%8E%AB%E5%90%AC%E7%A9%BF%E6%9E%97%E6%89%93%E5%8F%B6%E5%A3%B0%EF%BC%8C%E4%BD%95%E5%A6%A8%E5%90%9F%E5%95%B8%E4%B8%94%E5%BE%90%E8%A1%8C.html">莫听穿林打叶声，何妨吟啸且徐行</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="macdown.html">Mac上的Markdown编辑器——MacDown</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
<script src="asset/flow-sequence-chart/raphael-min.js"></script><script src="asset/flow-sequence-chart/underscore-min.js"></script><script src="asset/flow-sequence-chart/flowchart.min.js"></script><script src="asset/flow-sequence-chart/sequence-diagram-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"><div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/x-mathjax-config">if (typeof MathJaxListener !== 'undefined') { MathJax.Hub.Register.StartupHook('End', function () { MathJaxListener.invokeCallbackForKey_('End'); }); } </script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61550939-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
